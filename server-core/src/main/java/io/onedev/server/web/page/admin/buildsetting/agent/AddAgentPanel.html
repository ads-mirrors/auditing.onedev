<wicket:panel>
	<div class="p-5 add-agent">
		<h6 class="text-center mb-4"><wicket:t>Connect New Agent</wicket:t></h6>
		<ul wicket:id="tabs" class="nav nav-tabs nav-tabs-line nav-bold mb-4"></ul>
		<div wicket:id="instructions"></div>
	</div>
	<wicket:fragment wicket:id="dockerInstructionsFrag">
		<a wicket:id="showCommand" class="btn btn-light-primary"><wicket:t>Show Command</wicket:t></a> 
		<div class="text-muted font-size-sm mt-2 mb-3">(<wicket:t>a new agent token will be generated each time this button is pressed</wicket:t>)</div>					
		<div wicket:id="command"></div>
	</wicket:fragment>
	<wicket:fragment wicket:id="bareMetalInstructionsFrag">
		<div class="alert alert-light p-0 py-4">
			<div class="px-3 mb-2"><wicket:t>Follow below steps to install agent on remote machine (supports Linux/Windows/Mac OS X/FreeBSD):</wicket:t></div>
			<ol class="mb-0">
				<li><wicket:t>Make sure <a href="https://openjdk.java.net" target="_blank">Java 11 or higher</a> is installed</wicket:t></li>
				<li><wicket:t>Make sure docker engine is installed and docker command line is available in system path</wicket:t></li>
				<li><wicket:t>Make sure current user has permission to run docker containers</wicket:t></li>
				<li><wicket:t>Make sure git version 2.11.1 or higher is installed and available in system path</wicket:t></li>
				<li><wicket:t>Make sure git-lfs is installed and available in system path if you want to retrieve LFS files</wicket:t></li>
				<li><wicket:t>Download <a wicket:id="agentZip" class="link-primary">agent.zip</a> or <a wicket:id="agentTgz" class="link-primary">agent.tar.gz</a>. A new agent token will be included in the package</wicket:t></li>
				<li><wicket:t>Extract the package into a folder. <b class="text-danger">Warning:</b> On Mac OS X, do not extract to Mac managed 
				folders such as Downloads, Desktop, Documents; otherwise you may encounter permission issues 
				starting agent</wicket:t></li>
				<li>
					<wicket:t>Change property <code>serverUrl</code> in file <code>conf/agent.properties</code> if necessary. The default value is 
					taken from OneDev server url specified in <i>Administration / System Setting</i></wicket:t> 
				</li> 
				<li><wicket:t>From extracted folder, run <code>bin\agent.bat console</code> as administrator on Windows or <code>bin/agent.sh console</code> on other OS</wicket:t></li>
			</ol>
		</div>
		<ul class="text-muted font-size-sm mb-0">
			<li>
				<wicket:t>Agent is designed to be maintenance free. Once connected to server, it will be updated automatically 
				upon server upgrade</wicket:t>
			</li>
			<li>
				<wicket:t>Check <a href="https://docs.onedev.io/administration-guide/agent-management" target="_blank">agent management</a> for details, including instructions on how to run agent as service</wicket:t>
			</li>
		</ul>
	</wicket:fragment>
	<wicket:fragment wicket:id="dockerCommandFrag">
		<wicket:t>Start agent on remote Linux machine by running below command:</wicket:t> 
		<div class="text-monospace font-size-sm mt-3 alert alert-light">
			<span wicket:id="command"></span> <a wicket:id="copy"><wicket:svg href="copy" class="icon"></wicket:svg></a>
		</div>
		<ul class="text-muted font-size-sm mb-0">
			<li>
				<wicket:t>Environment variable <code>serverUrl</code> in above command is taken from OneDev server url
				specified in <i>Administration / System Setting</i>. Change it if necessary</wicket:t> 
			</li> 
			<li>
				<wicket:t>Agent is designed to be maintenance free. Once connected to server, it will be updated automatically 
				upon server upgrade</wicket:t>
			</li>
			<li>
				<wicket:t>Check <a href="https://docs.onedev.io/administration-guide/agent-management" target="_blank">agent management</a> for details, including list of supported environment variables</wicket:t>
			</li>
		</ul>
	</wicket:fragment>
</wicket:panel>